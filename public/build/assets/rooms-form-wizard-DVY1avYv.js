let r=1;const d=4;document.addEventListener("DOMContentLoaded",function(){u(1),m(1),document.querySelectorAll(".hci-input, .hci-select, .hci-textarea").forEach(t=>{t.addEventListener("input",function(){h(this),S()}),t.addEventListener("blur",function(){E(this)})}),S()});window.nextStep=function(){f()&&r<d&&(r++,u(r),m(r))};window.prevStep=function(){r>1&&(r--,u(r),m(r))};window.navigateToStep=function(e){(e<=r||f())&&(r=e,u(r),m(r))};window.cancelForm=function(){window.hasUnsavedChanges&&window.hasUnsavedChanges()?window.showUnsavedChangesModal(window.location.origin+"/rooms"):window.location.href=window.location.origin+"/rooms"};window.submitForm=function(){f()&&document.querySelector(".hci-form").submit()};function u(e){const t=document.querySelectorAll(".hci-form-section"),o=document.querySelectorAll(".hci-progress-step-vertical");t.forEach(n=>n.classList.remove("active"));const c=document.getElementById(w(e));c&&(c.classList.add("active"),c.scrollIntoView({behavior:"smooth",block:"start"})),o.forEach((n,i)=>{i+1<=e?(n.classList.add("completed"),n.classList.add("active")):(n.classList.remove("completed"),n.classList.remove("active"))})}function m(e){const t=document.getElementById("progress-bar"),o=document.getElementById("progress-percentage"),c=document.getElementById("current-step"),n=e/d*100;t&&(t.style.height=n+"%"),o&&(o.textContent=Math.round(n)+"%"),c&&(c.textContent=`Paso ${e} de ${d}`);const i=document.getElementById("submit-btn");i&&(e===d?i.classList.remove("hidden"):i.classList.add("hidden"))}function w(e){return["basica","detalles","equipamiento","resumen"][e-1]}function f(){const t=document.getElementById(w(r)).querySelectorAll("input[required], select[required], textarea[required]");let o=!0;return t.forEach(c=>{c.value.trim()?h(c):(E(c),o=!1)}),o||q("Por favor, completa los campos requeridos antes de continuar."),o}function q(e){let t=document.getElementById("step-error-message");t||(t=document.createElement("div"),t.id="step-error-message",t.className="hci-error-message",document.querySelector(".hci-container").insertBefore(t,document.querySelector(".hci-wizard-layout"))),t.innerHTML=`
        <div class="hci-error-content">
            <span class="hci-error-icon">⚠️</span>
            <span class="hci-error-text">${e}</span>
        </div>
    `,setTimeout(()=>t&&t.remove(),5e3)}function E(e){const t=e.checkValidity(),o=e.closest(".hci-field"),c=o==null?void 0:o.querySelector(".hci-field-error");if(t)h(e);else if(e.classList.add("border-red-500"),e.classList.remove("border-gray-300"),!c){const n=document.createElement("div");n.className="hci-field-error",n.textContent=e.validationMessage||"Este campo es requerido",o==null||o.appendChild(n)}}function h(e){e.classList.remove("border-red-500"),e.classList.add("border-gray-300");const t=e.closest(".hci-field"),o=t==null?void 0:t.querySelector(".hci-field-error");o&&o.remove()}function S(){var v,g,y,b;const e=((v=document.querySelector('input[name="name"]'))==null?void 0:v.value)||"",t=((g=document.querySelector('input[name="location"]'))==null?void 0:g.value)||"",o=((y=document.querySelector('input[name="capacity"]'))==null?void 0:y.value)||"",c=((b=document.querySelector('textarea[name="description"]'))==null?void 0:b.value)||"",n=l=>document.getElementById(l);n("resumen-name")&&(n("resumen-name").textContent=e||"No especificado"),n("resumen-location")&&(n("resumen-location").textContent=t||"No especificado"),n("resumen-capacity")&&(n("resumen-capacity").textContent=o||"No especificado"),n("resumen-description")&&(n("resumen-description").textContent=c||"No especificado");const i=[{name:"calefaccion",label:"Calefacción"},{name:"energia_electrica",label:"Energía Eléctrica"},{name:"existe_aseo",label:"Aseo Disponible"},{name:"plumones",label:"Plumones"},{name:"borrador",label:"Borrador"},{name:"pizarra_limpia",label:"Pizarra Limpia"},{name:"computador_funcional",label:"Computador Funcional"},{name:"cables_computador",label:"Cables del Computador"},{name:"control_remoto_camara",label:"Control Remoto de Cámara"},{name:"televisor_funcional",label:"Televisor Funcional"}],s=n("resumen-equipamiento");if(s){const l=i.filter(p=>{var a;return(a=document.querySelector(`input[name="${p.name}"]`))==null?void 0:a.checked});s.innerHTML="",l.length===0?s.textContent="No especificado":l.forEach(p=>{const a=document.createElement("span");a.className="inline-block px-2 py-1 rounded-md bg-[#c4dafa]/40 text-[#005187] text-xs",a.textContent=p.label,s.appendChild(a)})}}
