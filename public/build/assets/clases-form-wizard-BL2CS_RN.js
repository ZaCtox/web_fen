let c=1;const l=4;document.addEventListener("DOMContentLoaded",()=>{a(1),d(1),document.querySelectorAll(".hci-input, .hci-select, .hci-textarea, select, input").forEach(t=>t.addEventListener("input",u)),document.addEventListener("change",u),u()});window.nextStep=function(){c<l&&m()&&(c++,a(c),d(c))};window.prevStep=function(){c>1&&(c--,a(c),d(c))};window.navigateToStep=function(e){(e<=c||m())&&(c=e,a(e),d(e))};window.cancelForm=function(){confirm("¿Cancelar?")&&(window.location.href=window.location.origin+"/clases")};window.submitForm=function(){m()&&document.querySelector(".hci-form").submit()};function a(e){document.querySelectorAll(".hci-form-section").forEach(o=>o.classList.remove("active"));const t=document.getElementById(b(e));t&&(t.classList.add("active"),t.scrollIntoView({behavior:"smooth",block:"start"})),document.querySelectorAll(".hci-progress-step-vertical").forEach((o,r)=>{r+1<=e?o.classList.add("completed","active"):o.classList.remove("completed","active")})}function d(e){const t=e/l*100,o=document.getElementById("progress-bar");o&&(o.style.height=t+"%");const r=document.getElementById("current-step");r&&(r.textContent=`Paso ${e} de ${l}`);const i=document.getElementById("progress-percentage");i&&(i.textContent=Math.round(t)+"%")}function b(e){return["programa","sala","horario","resumen"][e-1]}function m(){const t=document.getElementById(b(c)).querySelectorAll("input[required], select[required], textarea[required]");let o=!0;return t.forEach(r=>{r.value.trim()?_(r):(o=!1,A(r))}),o||k("Completa los campos requeridos."),o}function k(e){let t=document.getElementById("step-error-message");t||(t=document.createElement("div"),t.id="step-error-message",t.className="hci-error-message",document.querySelector(".hci-container").insertBefore(t,document.querySelector(".hci-wizard-layout"))),t.innerHTML=`<div class="hci-error-content"><span class="hci-error-icon">⚠️</span><span class="hci-error-text">${e}</span></div>`,setTimeout(()=>t&&t.remove(),4e3)}function A(e){const t=e.checkValidity(),o=e.closest(".hci-field"),r=o==null?void 0:o.querySelector(".hci-field-error");if(t)_(e);else if(e.classList.add("border-red-500"),e.classList.remove("border-gray-300"),!r){const i=document.createElement("div");i.className="hci-field-error",i.textContent=e.validationMessage||"Campo requerido",o==null||o.appendChild(i)}}function _(e){e.classList.remove("border-red-500"),e.classList.add("border-gray-300");const t=e.closest(".hci-field"),o=t==null?void 0:t.querySelector(".hci-field-error");o&&o.remove()}function u(){var y,v,S,E,q,x,C,I;const e=s=>{var w,B,L;return((L=(B=(w=s==null?void 0:s.options)==null?void 0:w[s.selectedIndex])==null?void 0:B.textContent)==null?void 0:L.trim())||""},t=e(document.getElementById("magister")),o=e(document.getElementById("course_id")),r=((E=(S=(v=(y=document.getElementById("periodo_info"))==null?void 0:y.options)==null?void 0:v[0])==null?void 0:S.textContent)==null?void 0:E.replace("📘 ",""))||"",i=e(document.querySelector('select[name="tipo"]')),f=e(document.getElementById("modality")),$=e(document.getElementById("room_id")),p=((q=document.querySelector('select[name="dia"]'))==null?void 0:q.value)||"",h=((x=document.querySelector('input[name="hora_inicio"]'))==null?void 0:x.value)||"",g=((C=document.querySelector('input[name="hora_fin"]'))==null?void 0:C.value)||"",z=((I=document.querySelector('input[name="url_zoom"]'))==null?void 0:I.value)||"",n=s=>document.getElementById(s);n("resumen-programa")&&(n("resumen-programa").textContent=t||"—"),n("resumen-curso")&&(n("resumen-curso").textContent=o||"—"),n("resumen-periodo")&&(n("resumen-periodo").textContent=r||"—"),n("resumen-tipo")&&(n("resumen-tipo").textContent=i||"—"),n("resumen-modalidad")&&(n("resumen-modalidad").textContent=f||"—"),n("resumen-sala")&&(n("resumen-sala").textContent=$||(f==="online"?"— (Online)":"—")),n("resumen-horario")&&(n("resumen-horario").textContent=p&&h&&g?`${p} ${h}–${g}`:"—"),n("resumen-zoom")&&(n("resumen-zoom").textContent=z||"—")}
