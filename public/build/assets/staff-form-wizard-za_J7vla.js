let c=1;const u=4;document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".hci-form-section"),document.querySelectorAll(".hci-progress-step"),document.getElementById("progress-bar"),document.getElementById("progress-percentage"),document.getElementById("current-step"),i(1),a(1),document.querySelectorAll(".hci-input, .hci-select, .hci-textarea").forEach(t=>{t.addEventListener("blur",function(){w(this)}),t.addEventListener("input",function(){l(this),x()})})});window.nextStep=function(){d()&&c<u&&(c++,i(c),a(c))};window.prevStep=function(){c>1&&(c--,i(c),a(c))};window.navigateToStep=function(e){(e<=c||d())&&(c=e,i(c),a(c))};window.cancelForm=function(){confirm("¿Estás seguro de que quieres cancelar? Se perderán todos los datos ingresados.")&&(window.location.href=window.location.origin+"/staff")};function i(e){const t=document.querySelectorAll(".hci-form-section"),o=document.querySelectorAll(".hci-progress-step-vertical");t.forEach(n=>{n.classList.remove("active")});const r=document.getElementById(q(e));r&&(r.classList.add("active"),r.scrollIntoView({behavior:"smooth",block:"start"})),o.forEach((n,s)=>{s+1<=e?(n.classList.add("completed"),n.classList.add("active")):(n.classList.remove("completed"),n.classList.remove("active"))})}function a(e){const t=document.getElementById("progress-bar"),o=document.getElementById("progress-percentage"),r=document.getElementById("current-step"),n=e/u*100;t&&(t.style.height=n+"%"),o&&(o.textContent=Math.round(n)+"%"),r&&(r.textContent=`Paso ${e} de ${u}`)}function q(e){return["personal","contacto","adicional","resumen"][e-1]}function d(){const t=document.getElementById(q(c)).querySelectorAll("input[required], select[required], textarea[required]");let o=!0;return t.forEach(r=>{r.value.trim()?l(r):(w(r),o=!1)}),o||I("Por favor, completa todos los campos requeridos antes de continuar."),o}function I(e){let t=document.getElementById("step-error-message");t||(t=document.createElement("div"),t.id="step-error-message",t.className="hci-error-message",document.querySelector(".hci-container").insertBefore(t,document.querySelector(".hci-wizard-layout"))),t.innerHTML=`
        <div class="hci-error-content">
            <span class="hci-error-icon">⚠️</span>
            <span class="hci-error-text">${e}</span>
        </div>
    `,setTimeout(()=>{t&&t.remove()},5e3)}function w(e){const t=e.checkValidity(),o=e.closest(".hci-field"),r=o==null?void 0:o.querySelector(".hci-field-error");if(t)l(e);else if(e.classList.add("border-red-500"),e.classList.remove("border-gray-300"),!r){const n=document.createElement("div");n.className="hci-field-error",n.textContent=e.validationMessage||"Este campo es requerido",o==null||o.appendChild(n)}}function l(e){e.classList.remove("border-red-500"),e.classList.add("border-gray-300");const t=e.closest(".hci-field"),o=t==null?void 0:t.querySelector(".hci-field-error");o&&o.remove()}function x(){var y,h,v,E,S;const e=((y=document.querySelector('input[name="nombre"]'))==null?void 0:y.value)||"",t=((h=document.querySelector('input[name="cargo"]'))==null?void 0:h.value)||"",o=((v=document.querySelector('input[name="email"]'))==null?void 0:v.value)||"",r=((E=document.querySelector('input[name="telefono"]'))==null?void 0:E.value)||"",n=((S=document.querySelector('input[name="anexo"]'))==null?void 0:S.value)||"No especificado",s=document.getElementById("resumen-nombre"),m=document.getElementById("resumen-cargo"),f=document.getElementById("resumen-email"),p=document.getElementById("resumen-telefono"),g=document.getElementById("resumen-anexo");s&&(s.textContent=e||"No especificado"),m&&(m.textContent=t||"No especificado"),f&&(f.textContent=o||"No especificado"),p&&(p.textContent=r||"No especificado"),g&&(g.textContent=n)}window.submitForm=function(){d()&&document.querySelector(".hci-form").submit()};
