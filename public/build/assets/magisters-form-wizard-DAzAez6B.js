let c=1;const u=4;document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".hci-form-section"),document.querySelectorAll(".hci-progress-step-vertical"),document.getElementById("progress-bar"),document.getElementById("progress-percentage"),document.getElementById("current-step"),s(1),i(1),document.querySelectorAll(".hci-input, .hci-select, .hci-textarea").forEach(o=>{o.addEventListener("blur",function(){N(this)}),o.addEventListener("input",function(){l(this),C()})});const e=document.querySelector('input[name="color"]');e&&e.addEventListener("change",function(){C()})});window.nextStep=function(){d()&&c<u&&(c++,s(c),i(c))};window.prevStep=function(){c>1&&(c--,s(c),i(c))};window.navigateToStep=function(t){(t<=c||d())&&(c=t,s(c),i(c))};window.cancelForm=function(){window.hasUnsavedChanges&&window.hasUnsavedChanges()?window.showUnsavedChangesModal(window.location.origin+"/magisters"):window.location.href=window.location.origin+"/magisters"};function s(t){const e=document.querySelectorAll(".hci-form-section"),o=document.querySelectorAll(".hci-progress-step-vertical");e.forEach(n=>{n.classList.remove("active")});const r=document.getElementById(L(t));r&&(r.classList.add("active"),r.scrollIntoView({behavior:"smooth",block:"start"})),o.forEach((n,a)=>{a+1<=t?(n.classList.add("completed"),n.classList.add("active")):(n.classList.remove("completed"),n.classList.remove("active"))})}function i(t){const e=document.getElementById("progress-bar"),o=document.getElementById("progress-percentage"),r=document.getElementById("current-step"),n=t/u*100;e&&(e.style.height=n+"%"),o&&(o.textContent=Math.round(n)+"%"),r&&(r.textContent=`Paso ${t} de ${u}`)}function L(t){return["basica","personal","contacto","resumen"][t-1]}function d(){const e=document.getElementById(L(c)).querySelectorAll("input[required], select[required], textarea[required]");let o=!0;return e.forEach(r=>{r.value.trim()?l(r):(N(r),o=!1)}),o||T("Por favor, completa todos los campos requeridos antes de continuar."),o}function T(t){let e=document.getElementById("step-error-message");e||(e=document.createElement("div"),e.id="step-error-message",e.className="hci-error-message",document.querySelector(".hci-container").insertBefore(e,document.querySelector(".hci-wizard-layout"))),e.innerHTML=`
        <div class="hci-error-content">
            <span class="hci-error-icon">⚠️</span>
            <span class="hci-error-text">${t}</span>
        </div>
    `,setTimeout(()=>{e&&e.remove()},5e3)}function N(t){const e=t.checkValidity(),o=t.closest(".hci-field"),r=o==null?void 0:o.querySelector(".hci-field-error");if(e)l(t);else if(t.classList.add("border-red-500"),t.classList.remove("border-gray-300"),!r){const n=document.createElement("div");n.className="hci-field-error",n.textContent=t.validationMessage||"Este campo es requerido",o==null||o.appendChild(n)}}function l(t){t.classList.remove("border-red-500"),t.classList.add("border-gray-300");const e=t.closest(".hci-field"),o=e==null?void 0:e.querySelector(".hci-field-error");o&&o.remove()}function C(){var S,w,q,I,x,B,b;const t=((S=document.querySelector('input[name="nombre"]'))==null?void 0:S.value)||"",e=((w=document.querySelector('input[name="color"]'))==null?void 0:w.value)||"#3b82f6",o=((q=document.querySelector('input[name="encargado"]'))==null?void 0:q.value)||"",r=((I=document.querySelector('input[name="asistente"]'))==null?void 0:I.value)||"",n=((x=document.querySelector('input[name="telefono"]'))==null?void 0:x.value)||"",a=((B=document.querySelector('input[name="anexo"]'))==null?void 0:B.value)||"",A=((b=document.querySelector('input[name="correo"]'))==null?void 0:b.value)||"",m=document.getElementById("resumen-nombre"),f=document.getElementById("resumen-color"),p=document.getElementById("resumen-color-text"),g=document.getElementById("resumen-encargado"),y=document.getElementById("resumen-asistente"),h=document.getElementById("resumen-telefono"),v=document.getElementById("resumen-anexo"),E=document.getElementById("resumen-correo");m&&(m.textContent=t||"No especificado"),f&&(f.style.backgroundColor=e),p&&(p.textContent=e),g&&(g.textContent=o||"No especificado"),y&&(y.textContent=r||"No especificado"),h&&(h.textContent=n||"No especificado"),v&&(v.textContent=a||"No especificado"),E&&(E.textContent=A||"No especificado")}window.submitForm=function(){d()&&document.querySelector(".hci-form").submit()};
